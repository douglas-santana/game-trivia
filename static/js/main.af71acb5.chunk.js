(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},113:function(e,t,a){e.exports=a(211)},122:function(e,t,a){},129:function(e,t){},131:function(e,t){},164:function(e,t){},165:function(e,t){},171:function(e,t){},210:function(e,t,a){},211:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(45),o=a.n(i),c=a(18),s=a(30),l=(a(122),a(20)),u=a(47),d=a(5),m=a(6),h=a(8),b=a(7),p=a(10),g=a(9),f=a(108),v=a.n(f),O=a(39),E=a.n(O),y=function(){return fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(e){var t=e.token;return localStorage.token=t,t})).then((function(e){return fetch("https://opentdb.com/api.php?amount=5&token=".concat(e))})).then((function(e){return e.json()})).then((function(e){return e.results}))},j=function(){return JSON.parse(localStorage.state)},S=a(109),k=a.n(S),w=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(b.a)(t).call(this))).state={name:"",email:"",buttonDisabled:!0},e.handleChangeLogin=e.handleChangeLogin.bind(Object(p.a)(e)),e.submitLogin=e.submitLogin.bind(Object(p.a)(e)),e}return Object(g.a)(t,e),Object(m.a)(t,[{key:"validateLogin",value:function(){var e=this.state,t=e.name,a=e.email,n=t.length;/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(a)&&n>=3?this.setState({buttonDisabled:!1}):this.setState({buttonDisabled:!0})}},{key:"handleChangeLogin",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(u.a)({},n,r),(function(){return t.validateLogin()}))}},{key:"handleClick",value:function(){(0,this.props.actionBtn)()}},{key:"submitLogin",value:function(){var e=this.state,t=e.name,a=e.email,n=v()(a).toString();localStorage.state=JSON.stringify({player:{name:t,gravatarEmail:"https://www.gravatar.com/avatar/".concat(n),score:0,assertions:0}})}},{key:"render",value:function(){var e=this,t=this.state.buttonDisabled;return r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:k.a,className:"App-logo",alt:"logo"}),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"inputName"},"Nome",r.a.createElement("input",{"data-testid":"input-player-name",name:"name",type:"text",onChange:this.handleChangeLogin})),r.a.createElement("label",{htmlFor:"inputEmail"},"E-mail",r.a.createElement("input",{"data-testid":"input-gravatar-email",name:"email",type:"email",onChange:this.handleChangeLogin})),r.a.createElement(c.b,{to:"jogo"},r.a.createElement("button",{"data-testid":"btn-play",type:"button",disabled:t,onClick:function(){e.handleClick(),e.submitLogin()}},"Jogar")),r.a.createElement(c.b,{to:"/settings","data-testid":"btn-settings"},r.a.createElement("button",{type:"button"},"Setings"))))}}]),t}(n.Component),C=Object(s.b)(null,(function(e){return{actionBtn:function(){return e((function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(y());case 2:t=a.sent,e({type:"SUCESS",payload:t});case 4:case"end":return a.stop()}}))}))}}}))(w),x=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{"data-testid":"settings-title"},"Setings"))}}]),t}(n.Component),T=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.state).player,t=e.gravatarEmail,a=e.name,n=this.props.score;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"JOGO"),r.a.createElement("img",{src:t,"data-testid":"header-profile-picture",alt:a}),r.a.createElement("span",{"data-testid":"header-player-name"},a),r.a.createElement("span",{"data-testid":"header-score"},n)))}}]),t}(n.Component),q=a(68),V=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(b.a)(t).call(this))).state={seconds:30},e.updateTimer=e.updateTimer.bind(Object(p.a)(e)),e}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.props.restart&&e.setState((function(e){return{seconds:e.seconds-1}}))}),1e3)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.scoreValue,r=a.stopTimer,i=a.stop;1===t.seconds&&(n(),this.updateTimer()),!e.stop&&i&&(this.updateTimer(),r(t.seconds))}},{key:"updateTimer",value:function(){this.setState({seconds:30})}},{key:"render",value:function(){var e=this.state.seconds;return r.a.createElement("div",null,r.a.createElement("p",null,e))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={array:e,next:!1,index:0,isValid:!1,value:!1,restart:!0,isToggleOn:!1},a.randAnswers=a.randAnswers.bind(Object(p.a)(a)),a.listenerChange=a.listenerChange.bind(Object(p.a)(a)),a.sumScore=a.sumScore.bind(Object(p.a)(a)),a.changeState=a.changeState.bind(Object(p.a)(a)),a.nextQuestion=a.nextQuestion.bind(Object(p.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"randAnswers",value:function(e,t){var a=Object(q.a)(t),n=Math.floor(Math.random()*(a.length-1+1)),r=a[n];return a.splice(n,0),a[n]=e,[].concat(Object(q.a)(a),[r])}},{key:"listenerChange",value:function(){this.setState({isValid:!0,isToggleOn:!0})}},{key:"changeState",value:function(e){this.setState({value:!1});var t=this.state,a=t.difficulty,n=t.answer,r=e;this.calcScore(0,r,a,n)}},{key:"nextQuestion",value:function(){var e=this.state.index;this.setState({index:e+1,next:!1,isValid:!1,isToggleOn:!1,restart:!0})}},{key:"calcScore",value:function(e,t,a,n){var r=j().player,i=r.gravatarEmail,o=r.name,c=r.score,s=r.assertions;"correct-answer"===n["data-testid"]?("easy"===a?e=10+1*t+c:"medium"===a?e=10+2*t+c:"hard"===a&&(e=10+3*t+c),s+=1):e=c,(0,this.props.scoreValue)(e),localStorage.setItem("state",JSON.stringify({player:{name:o,assertions:s,score:e,gravatarEmail:i}}))}},{key:"sumScore",value:function(e,t){this.setState((function(e){return{isToggleOn:!e.isToggleOn}})),this.setState({value:!0,next:!0,difficulty:t,answer:e,restart:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.array,n=t.index,i=t.next,o=t.restart,c=t.isValid,s=t.value,u=t.isToggleOn;return 5===n?r.a.createElement(l.a,{to:"/feedback"}):r.a.createElement("div",null,r.a.createElement("h3",{"data-testid":"question-category"},a[n].category),r.a.createElement("h3",{"data-testid":"question-text"},a[n].question),this.randAnswers(a[n].correct_answer,a[n].incorrect_answers).map((function(t,o){var s=t===a[n].correct_answer?"3px solid rgb(6, 240, 15)":"3px solid rgb(255, 0, 0)",l={"data-testid":t===a[n].correct_answer?"correct-answer":"wrong-answer-".concat(o)};return r.a.createElement("button",Object.assign({style:{border:"".concat(i?s:"")},key:t,type:"button"},l,{disabled:c,onClick:function(){return e.sumScore(l,a[n].difficulty)}}),t)})),r.a.createElement(V,{scoreValue:this.listenerChange,stopTimer:this.changeState,stop:s,restart:o}),u?r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:this.nextQuestion},"Next"):null)}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={questions:[],loading:!0,value:0},a.setScoreValue=a.setScoreValue.bind(Object(p.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;y().then((function(t){e.setState({questions:t,loading:!1})}))}},{key:"setScoreValue",value:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this.state,t=e.questions,a=e.loading,n=e.value;return r.a.createElement("div",{className:"game-container"},r.a.createElement(T,{score:n}),0===t.length?a:r.a.createElement(L,Object.assign({},t,{scoreValue:this.setScoreValue})))}}]),t}(n.Component),D=Object(s.b)((function(e){return{questions:e.questionReducer.questions}}),null)(N),J=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement(c.b,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-go-home"},"Voltar para o in\xedcio")))}}]),t}(n.Component),_=(a(210),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=j().player,t=e.score,a=e.assertions;return r.a.createElement("div",null,r.a.createElement(T,{score:t}),r.a.createElement("p",{"data-testid":"feedback-total-score"},t),r.a.createElement("p",{"data-testid":"feedback-total-question"},a),r.a.createElement("p",{"data-testid":"feedback-text"},a>=3?"Mandou bem!":"Podia ser melhor..."),r.a.createElement(c.b,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again"},"Jogar novamente")),r.a.createElement(c.b,{to:"/ranking"},r.a.createElement("button",{type:"button","data-testid":"btn-ranking"},"Ver Ranking")))}}]),t}(n.Component));var Q=a(25),U=a(111),A=a(112),R=a(38),I={token:""},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCESS":return Object(R.a)({},e,{token:t.payload});default:return e}},B={questions:[]};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_QUESTIONS_SUCCESS":return Object(R.a)({},e,{questions:t.payload});case"REQUEST_QUESTIONS_FAILED":return Object(R.a)({},e,{error:t.payload});default:return e}},W=Object(Q.combineReducers)({reducerToken:M,questionReducer:F}),$=Object(Q.createStore)(W,Object(U.composeWithDevTools)(Object(Q.applyMiddleware)(A.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null,r.a.createElement(s.a,{store:$},r.a.createElement((function(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/game-trivia",component:C}),r.a.createElement(l.b,{path:"/settings",component:x}),r.a.createElement(l.b,{path:"/jogo",component:D}),r.a.createElement(l.b,{path:"/ranking",component:J}),r.a.createElement(l.b,{path:"/feedback",component:_}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[113,1,2]]]);
//# sourceMappingURL=main.af71acb5.chunk.js.map